extends layout 

block content
  h1 Registrar Resultados
  if orden && orden.length > 0
    h2 Orden: #{orden[0].OrdenID} - Paciente: #{orden[0].NombrePaciente} #{orden[0].ApellidoPaciente}
    p Edad: #{orden[0].EdadPaciente} años | Género: #{orden[0].SexoPaciente}
    form(method="POST" action="/registrarResultados")
      input(type="hidden" name="idOrden" value=orden[0].OrdenID)
      table.table.table-striped
        thead
          tr
            th Examen
            th Determinación
            th Unidad de Medida
            th Valor de Referencia
            th Género del Valor de Referencia
            th Resultado
        tbody
          each item in orden
            tr
              td= item.NombreExamen
              td= item.NombreDeterminacion
              td= item.UnidadMedidaDeterminacion
              td #{item.ValorReferenciaMinimo} - #{item.ValorReferenciaMaximo}
              td= item.SexoValorReferencia == 'M' ? 'Masculino' : 'Femenino' 
              td
                input.form-control(type="text" name=`resultado_${item.DeterminacionID}` placeholder="Ingrese resultado")
                // Campo oculto para la unidad de medida
                input(type="hidden" name=`unidad_${item.DeterminacionID}` value=item.UnidadMedidaDeterminacion)
      button.btn.btn-primary(type="submit") Guardar Resultados
  else
    p No se encontraron resultados a analizar para esta orden.
